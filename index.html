<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Image to ASCII TEST</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background:black;
  color:#00ff88;
  font-family:monospace;
  text-align:center;
}
pre {
  font-size:6px;
  line-height:6px;
  white-space:pre;
}
</style>
</head>
<body>

<h3>UPLOAD IMAGE TEST</h3>
<input type="file" id="upload" accept="image/*">
<pre id="out"></pre>
<canvas id="c" style="display:none"></canvas>

<script>
const upload = document.getElementById("upload");
const out = document.getElementById("out");
const c = document.getElementById("c");
const ctx = c.getContext("2d");
const chars = "@#*+=-:. ";

upload.onchange = () => {
  const file = upload.files[0];
  if (!file) return;

  const img = new Image();
  img.src = URL.createObjectURL(file);

  img.onload = () => {
    const w = 100;
    const h = 100;
    c.width = w;
    c.height = h;
    ctx.drawImage(img, 0, 0, w, h);

    const d = ctx.getImageData(0,0,w,h).data;
    let txt = "";

    for (let y=0;y<h;y++){
      for (let x=0;x<w;x++){
        const i=(y*w+x)*4;
        const b=(d[i]+d[i+1]+d[i+2])/3;
        txt += chars[Math.floor(b/255*(chars.length-1))];
      }
      txt+="\n";
    }

    out.textContent = txt;
  };
};
</script>

</body>
</html>
